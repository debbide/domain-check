<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>域名到期监控</title>
    <link id="faviconLink" rel="icon" type="image/png" href="https://pan.811520.xyz/icon/domain-check.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <link rel="stylesheet" href="/css/style.css?v=5">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="header">
        <h1 id="siteTitle"><i class="fas fa-clock"></i> 域名到期监控</h1>
        <div class="action-buttons">
            <button id="darkModeToggle" title="切换深色模式"><i class="fas fa-moon"></i></button>
            <button id="settingsBtn" class="action-btn settings-btn" style="background-color: #607d8b;"><i
                    class="fas fa-cog"></i> 系统设置</button>
            <button id="addDomainBtn" class="action-btn add-btn"><i class="fas fa-plus"></i> 添加域名</button>
            <button id="exportDataBtn" class="action-btn export-btn"><i class="fas fa-download"></i> 导出数据</button>
            <button id="importDataBtn" class="action-btn import-btn"><i class="fas fa-upload"></i> 导入数据</button>
            <input type="file" id="importFileInput" accept=".json" style="display: none;">
        </div>
    </div>

    <div id="domainFormModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2>添加/编辑域名</h2>
            <form id="domainForm">
                <input type="hidden" id="editOriginalDomain">
                <label for="domain"><i class="fa fa-globe"></i> 域名</label>
                <textarea id="domain" rows="3" placeholder="支持批量添加: example.com, test.com (用逗号、空格或换行分隔)"
                    required></textarea>

                <div id="domainFillWarning" class="form-warning"></div>

                <label for="registrationDate"><i class="fa fa-calendar"></i> 注册时间 (YYYY-MM-DD)</label>
                <input type="date" id="registrationDate" required>

                <label for="renewalPeriod"><i class="fas fa-history"></i> 续费周期 (可选)</label>
                <div class="renewal-group">
                    <input type="number" id="renewalPeriod" min="1" max="100" placeholder="例如: 1, 填写后会自动计算到期时间"
                        value="">
                    <select id="renewalUnit">
                        <option value="year">年</option>
                        <option value="month">月</option>
                    </select>
                </div>

                <label for="expirationDate"><i class="fa fa-calendar"></i> 到期时间 (YYYY-MM-DD)</label>
                <input type="date" id="expirationDate" required>

                <label for="system"><i class="fa fa-registered"></i> 注册商名称</label>
                <input type="text" id="system" placeholder="例如: cloudflare">

                <label for="systemURL"><i class="fa fa-link"></i> 注册商地址</label>
                <input type="url" id="systemURL" placeholder="例如: https://dash.cloudflare.com">

                <label for="registerAccount"><i class="fa fa-user"></i> 注册账号 (可选)</label>
                <input type="text" id="registerAccount" placeholder="例如: admin@example.com">

                <label for="groups"><i class="fa fa-tags"></i> 分组 (可选)</label>
                <input type="text" id="groups" placeholder="多个分组可用英文逗号分隔, 例如: 主要, 个人, 待续费">

                <button type="submit"><i class="fa fa-save"></i> 保存</button>
            </form>
        </div>
    </div>

    <!-- 系统设置模态框 -->
    <div id="settingsModal" class="modal">
        <div class="modal-content settings-modal">
            <span class="close-btn">&times;</span>
            <h2><i class="fas fa-cog"></i> 系统设置</h2>
            <form id="settingsForm">
                <!-- 基本设置 -->
                <div class="settings-section">
                    <div class="section-header">
                        <i class="fas fa-sliders-h"></i>
                        <span>基本设置</span>
                    </div>
                    <div class="settings-grid">
                        <div class="setting-item">
                            <label><i class="fas fa-heading"></i> 网站名称</label>
                            <input type="text" id="set_siteName" placeholder="域名到期监控">
                        </div>
                        <div class="setting-item">
                            <label><i class="fas fa-key"></i> 访问密码</label>
                            <input type="password" id="set_password" placeholder="留空则不修改">
                        </div>
                        <div class="setting-item">
                            <label><i class="fas fa-bell"></i> 提醒天数</label>
                            <input type="number" id="set_days" placeholder="30" min="1" max="365">
                        </div>
                        <div class="setting-item">
                            <label><i class="fas fa-clock"></i> 定时任务</label>
                            <input type="text" id="set_cronSchedule" placeholder="0 9,21 * * *">
                        </div>
                    </div>
                </div>

                <!-- 外观设置 -->
                <div class="settings-section">
                    <div class="section-header">
                        <i class="fas fa-palette"></i>
                        <span>外观设置</span>
                    </div>
                    <div class="settings-grid single-column">
                        <div class="setting-item">
                            <label><i class="fas fa-image"></i> 网站图标</label>
                            <input type="url" id="set_siteIcon" placeholder="https://example.com/icon.png">
                        </div>
                        <div class="setting-item">
                            <label><i class="fas fa-photo-video"></i> 背景图片</label>
                            <input type="url" id="set_bgimgURL" placeholder="https://example.com/bg.webp">
                        </div>
                    </div>
                </div>

                <!-- 链接设置 -->
                <div class="settings-section">
                    <div class="section-header">
                        <i class="fas fa-link"></i>
                        <span>链接设置</span>
                    </div>
                    <div class="settings-grid single-column">
                        <div class="setting-item">
                            <label><i class="fab fa-github"></i> GitHub 链接</label>
                            <input type="url" id="set_githubURL" placeholder="https://github.com/...">
                        </div>
                    </div>
                    <div class="settings-grid">
                        <div class="setting-item">
                            <label><i class="fas fa-blog"></i> 博客名称</label>
                            <input type="text" id="set_blogName" placeholder="My Blog">
                        </div>
                        <div class="setting-item">
                            <label><i class="fas fa-external-link-alt"></i> 博客链接</label>
                            <input type="url" id="set_blogURL" placeholder="https://blog.example.com">
                        </div>
                    </div>
                </div>

                <!-- Telegram 通知 -->
                <div class="settings-section telegram-section">
                    <div class="section-header">
                        <i class="fab fa-telegram"></i>
                        <span>Telegram 通知</span>
                        <button type="button" id="testTelegramBtn" class="test-btn" title="发送测试消息">
                            <i class="fas fa-paper-plane"></i> 测试
                        </button>
                    </div>
                    <div class="settings-grid">
                        <div class="setting-item">
                            <label><i class="fas fa-id-badge"></i> Chat ID</label>
                            <input type="text" id="set_tgid" placeholder="用户ID或群组ID(负数)">
                        </div>
                        <div class="setting-item">
                            <label><i class="fas fa-robot"></i> Bot Token</label>
                            <input type="text" id="set_tgtoken" placeholder="从 @BotFather 获取">
                        </div>
                    </div>
                    <div class="telegram-hint">
                        <i class="fas fa-info-circle"></i>
                        群组 ID 通常为负数，如 <code>-1001234567890</code>
                    </div>
                </div>

                <!-- WebDAV 备份 -->
                <div class="settings-section webdav-section">
                    <div class="section-header">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <span>WebDAV 备份</span>
                        <button type="button" id="testWebdavBtn" class="test-btn webdav-test" title="测试连接">
                            <i class="fas fa-plug"></i> 测试
                        </button>
                    </div>
                    <div class="settings-grid single-column">
                        <div class="setting-item">
                            <label><i class="fas fa-server"></i> WebDAV 地址</label>
                            <input type="url" id="set_webdavUrl" placeholder="https://dav.example.com/backup/">
                        </div>
                    </div>
                    <div class="settings-grid">
                        <div class="setting-item">
                            <label><i class="fas fa-user"></i> 用户名</label>
                            <input type="text" id="set_webdavUser" placeholder="WebDAV 用户名">
                        </div>
                        <div class="setting-item">
                            <label><i class="fas fa-lock"></i> 密码</label>
                            <input type="password" id="set_webdavPass" placeholder="WebDAV 密码">
                        </div>
                    </div>
                    <div class="settings-grid">
                        <div class="setting-item">
                            <label><i class="fas fa-calendar-alt"></i> 保留天数</label>
                            <input type="number" id="set_webdavRetention" placeholder="7" min="1" max="365">
                        </div>
                        <div class="setting-item checkbox-item">
                            <label>
                                <input type="checkbox" id="set_webdavAutoBackup">
                                <span><i class="fas fa-sync-alt"></i> 定时自动备份</span>
                            </label>
                        </div>
                    </div>
                    <div class="webdav-actions">
                        <button type="button" id="backupNowBtn" class="action-btn-small">
                            <i class="fas fa-upload"></i> 立即备份
                        </button>
                        <button type="button" id="showBackupsBtn" class="action-btn-small secondary">
                            <i class="fas fa-list"></i> 备份列表
                        </button>
                    </div>
                </div>

                <div class="settings-actions">
                    <button type="submit" class="save-btn">
                        <i class="fas fa-save"></i> 保存设置
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- 备份列表模态框 -->
    <div id="backupsModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <span class="close-btn">&times;</span>
            <h2><i class="fas fa-list"></i> 备份列表</h2>
            <div id="backupsList" class="backups-list">
                <div class="loading">加载中...</div>
            </div>
        </div>
    </div>

    <!-- 图表容器 -->
    <div id="chartsContainer" class="charts-container" style="display: none;">
        <div class="chart-wrapper">
            <canvas id="statusChart"></canvas>
        </div>
        <div class="chart-wrapper">
            <canvas id="registrarChart"></canvas>
        </div>
    </div>

    <div id="summary" class="summary-container"></div>

    <div class="controls-container">
        <div id="groupTabs" class="tabs-container">
            <button class="tab-btn active" data-group="全部">全部</button>
            <button class="tab-btn" data-group="一级域名">一级域名</button>
            <button class="tab-btn" data-group="二级域名">二级域名</button>
            <button class="tab-btn" data-group="未分组">未分组</button>
        </div>
        <div class="search-container">
            <i class="fas fa-search"></i>
            <input type="text" id="searchBox" placeholder="支持全文模糊搜索">
        </div>
    </div>

    <div id="domainList" class="domain-grid"></div>
    <div id="pagination" class="pagination"></div>
    <div id="footer"></div>

    <!-- 批量操作栏 -->
    <div id="batchToolbar" class="batch-toolbar">
        <div class="batch-info">
            <label><input type="checkbox" id="selectAllBtn"> 全选</label>
            <span>已选 <span id="selectedCount">0</span> 项</span>
        </div>
        <div class="batch-actions">
            <button id="batchDeleteBtn" class="action-btn" style="background-color: #ef4444;"><i
                    class="fas fa-trash"></i> 批量删除</button>
        </div>
    </div>

    <script src="/js/app.js?v=5"></script>
</body>

</html>